# Домашнее задание к занятию "7.4. Средства командной работы над инфраструктурой"  

## Задача 1. Настроить terraform cloud (необязательно, но крайне желательно)

В это задании предлагается познакомиться со средством командой работы над инфраструктурой предоставляемым разработчиками терраформа.  
Зарегистрируйтесь на https://app.terraform.io/. (регистрация бесплатная и не требует использования платежных инструментов).  
Создайте в своем github аккаунте (или другом хранилище репозиториев) отдельный репозиторий с конфигурационными файлами   
прошлых занятий (или воспользуйтесь любым простым конфигом).
Зарегистрируйте этот репозиторий в https://app.terraform.io/.  
Выполните plan и apply.  
В качестве результата задания приложите снимок экрана с успешным применением конфигурации.  
```
terraform недоступен
```

## Задача 2. Написать серверный конфиг для атлантиса  

Смысл задания – познакомиться с документацией о серверной конфигурации (https://www.runatlantis.io/docs/server-side-repo-config.html)
и конфигурации уровня репозитория (https://www.runatlantis.io/docs/repo-level-atlantis-yaml.html)  
Создай server.yaml который скажет атлантису:  
Укажите, что атлантис должен работать только для репозиториев в вашем github (или любом другом) аккаунте.  
На стороне клиентского конфига разрешите изменять workflow, то есть для каждого репозитория можно будет указать свои дополнительные команды.  
В workflow используемом по-умолчанию сделайте так, что бы во время планирования не происходил lock состояния.  
Создай atlantis.yaml который, если поместить в корень terraform проекта, скажет атлантису:  
Надо запускать планирование и аплай для двух воркспейсов stage и prod.
Необходимо включить автопланирование при изменении любых файлов *.tf.
В качестве результата приложите ссылку на файлы server.yaml и atlantis.yaml.
```
1. надо поднять docker-контейнер с запущенным Atlantis (работающий сервер) и настроить его
2. настроить свой репозиторий на работу с ним
Видео демо-работы с Atlantis https://www.youtube.com/watch?v=ASdnj59iG2E

```

## Задача 3. Знакомство с каталогом модулей

В каталоге модулей (https://registry.terraform.io/browse/modules) найдите официальный модуль от aws для создания ec2 инстансов.  
Изучите как устроен модуль. Задумайтесь, будете ли в своем проекте использовать этот модуль или непосредственно ресурс aws_instance без помощи модуля?  
В рамках предпоследнего задания был создан ec2 при помощи ресурса aws_instance. Создайте аналогичный инстанс при помощи найденного модуля.  
В качестве результата задания приложите ссылку на созданный блок конфигураций.  
```
terraform недоступен
```
