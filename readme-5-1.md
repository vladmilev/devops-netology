# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения"


## Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
```
Полная или аппаратная - работает на уровне "железа", использует драйвера операционной системы  
Паравиртуализация использует эмуляцию аппаратных средств, поэтому ей нужны модифицированные версии 
гостевых операционных систем (ОС)
Виртуализация на основе ОС - создаются гостевые ОС с тем же ядром, что и хостовая ОС

* В паравиртуализации модифицированное ядро нужно не из-за эмуляции устройств (это происходит и при полной виртуализации), 
а для значительного увеличения быстродействия: системные вызовы пробрасываются в хостовую ОС, вместо выполнения внутри ВМ.
```

## Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.
Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.  

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.
```
Высоконагруженная база данных, чувствительная к отказу - паравиртуализация 
(позволяет осуществлять быстрое автоматическое переключение ВМ в случае отказа, 
осуществлять в режиме реального времени синхронизацию и репликацию данных между различными БД ВМ)
* Здесь лучше использовать физический сервер. Сама паравиртуализация не обеспечивают репликацию и т.п.,
но превращает запущенную ВМ в одну точку отказа, надёжность которой ниже, чем у "железа". 
Более того, слово "высоконагруженная" говорит о том, что нам будет нужно максимальное количество ресурсов
и, опять же, ресурсы на восстановление будут ограничены.

Различные web-приложения - паравиртуализация (позволяет осуществлять балансировку нагрузки между 
различными экземплярами веб-приложений для достижения эффективной и быстрой обработки пользовательских запросов)

Windows системы для использования бухгалтерским отделом - виртуализация уровня ОС 
(наиболее безопасная и эффективная работа для приложений написанных для Windows 
- использование ВМ с тем же Windows-ядром, что и сам хостовый сервер)

Системы, выполняющие высокопроизводительные расчеты на GPU - физические сервера 
(поскольку высокопроизводительные расчеты могут сильно замедлить работу других ВМ сервера)
```

## Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
```
поскольку используется преимущественно Windows based инфраструктура, 
тогда лучше использовать Microsoft Hyper-V - широкий функционал, 
более совместим с Windows инфораструктурой, достаточно низкий порог входа для инженеров. 
```
Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
```
приоритетнее KVM - любые гостевые ос, open source решение, является нативным для большинства ядер Linux, 
что дает преимущество в производительности, активно развивается, большое комьюнити.
```
Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
```
бесплатный Hyper-V будет максимально совместим с Windows, производителен.
```
Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
```
для теcтирования достаточно open source решения с низким порогом входа - KVM 
```

## Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
```
Проблемы и недостатки гетерогенной среды:
- высокие расходы на квалифицированный персонал 
(необходимо содержать несколько команд сопровождения для разных систем)
- сложности с масштабируемостью (потребуется масштабировать 2 и более системы) 
- сложность управления ресурсами
- финансовые издержки (необходимо содержать несколько систем одновременно, оплата лицензий)
- проблемы миграции между разными системами 
(сложности полного дублирования всей инфраструктуры под 2 и более системы виртуализации)
- сложнее отладка (если продакшен и тестирование на разных системах, то отлавливать ошибки ПО сложнее)
      
Минимизировать можно:
- распределив системы по совместимости: Hyper-V для всей Windows инфраструктуры (бухгалтерия, 1С)
и VMWare для остальных (основное бизнес ПО)
- обучить команду сопровождения работе с обоими системами 
(взаимозаменяемость, сокращение издержек на персонал)

В большинстве случаев выбрал бы одну систему, поскольку инфраструктурно и финансово это проще, легче, дешевле.
Но, в конечном итоге, выбор зависит от контекста использования ПО в организации.
```
